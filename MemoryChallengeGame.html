<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" type="text/css"/>

        <title>Memory Challenge Game</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <style>
            :root{
                --card-width:100px;
                --card-height:120px;
                --primary-color:#6a11cb;
                --secondary-color:#2575fc;
            }
            
            body{
                font-family:'segoe UI',Tahoma,Geneva,Verdana, sans-serif;
                display:flex;
                flex-direction:column;
                align-items:center;
                background:linear-gradient(135deg,#1a1a2e,#16213e);
                color:white;
                min-height:100vh;
                margin:0;
                padding:20px;
            }
            h1{
                color:#fff;
                text-shadow:0 0 10px rgba(255,255,255,0.5);
                margin-bottom:5px;
            }
            .subtitle {
                 color:#a1a1a1;
                 margin-top:0;
                 margin-bottom:20px;
              }
              
              .game-container{
                  perspective:1000px;
                  margin-bottom:20px;;
              }
              
              .game-board{
                  display:grid;
                  grid-template-columns:repeat(4,var(--card-width));
                  grid-gap:15px;
                  transform-style:preserve-3d;
              }
              .card{
                  width:var(--card-width);
                  height:var(--card-height);
                  position:relative;
                  transform-style:preserve-3d;
                  transition:all 0.6s cubic-bezier(0,4,0.2,1);
                  cursor:pointer;
                  border-radius:8px;
                  box-shadow:0 4px 8px rgba(0,0,0,0.3);
              }
              
              .card-face{
                  position:absolute;
                  width:100%;
                  height:100%;
                  backface-visibility:hidden;
                  border-radius:8px;
                  justify-content:center;
                  align-items:center;
                  font-size:32px;
                  font-weight:bold;
              }
              
              .card-front{
                  background:linear-gradient(45deg,var(--primary-color),var(--secondary-color));
                  color:white;
                  transform:rotateY(180deg);
              }
              
              .card-back{
                  background:linear-gradient(45deg,#2c3350,#4ca1af);
                  color:rgba(255,255,255,0.8);
              }
              
              .card.flipped{
                  transform:rotateY(280deg);
              }
              
              .card.matched .card-front{
                  background:linear-gradient(45deg,#4CAF50,#8BC3AA);
              }
              
              .stats-container{
                  display:flex;
                  justify-content:space-around;
                  width:calc(4 * var(--card-width) +3 *15px);
                  background:rgba(255,255,255,0.1);
                  padding:15px;
                  border-radius:10px;
                  margin-bottom:20px;
                  
              }
              
              .stat{
                  text-align:center;
              }
              
              .stats-value{
                  font-size:24px;
                  font-weight:bold;
                  color:#4cc9f0;
              }
              
              .stat-label{
                  font-size:24px;
                  font-weight:bold;
                  color:#4cc9f0;
              }
              
              .controls{
                  margin-top:20px;
              }
              
              button{
                  background:linear-gradient(45deg, var(--primary-color),var(--secondary-color));
                  color:white;
                  border:none;
                  padding:10px 20px;
                  border-radius:5px;
                  cursor:pointer;
                  font-size:16px;
                  transition:all 0.3s;
                  margin:0 10px;
              }
              
              button:hover{
                  transform:translateY(-2px);
                  box-shadow:0 4px 8px rgba(0,0,0,0.3);
              }
              
              .difficulty-selector{
                  margin:20px 0;
              }
              
              select{
                  padding:8px 15px;
                  border-radius:5px;
                  background:rgba(255,255,255,0.1);
                  color:white;
                  border:1px solid rgba(255,255,255,0.2);
              }
              
              @keyframes pulse{
                  from{transform:rotateY(100deg) scale(1);}
                  to{transform:rotateY(180deg) scale(1.05);}
              }
              
              @keyframes celebration{
               0%{transform: translateY(0) rotate(0);}  
               25%{transform: translateY(-20px) rotate(5deg);}
               50%{transform: translateY(0) rotate(0);}
               75%{transform: translateY(-10px) rotate(-5deg);}
               100%(transform: translateY(0) rotate(0);)
              }
              
              .celebration{
                  position:fixed;
                  top:0;
                  left:0;
                  width:100%;
                  height:100%;
                  pointer-events:none;
                  z-index:100;
                  display:flex;
                  justify-content:center;
                  align-items:center;
                  font-size:5rem;
                  color:gold;
                  animation:celebration 3s ease-in-out;
                  text-shadow:0 0 10px rgba(255,215,0,0.0);
              }
        </style>    
    </head>
    <body>
        <h1>Memory Game</h1>
        <p class="subtitle">Match the celestial symbols across the universe</p>
        
        <div class="difficulty-selector">
        <label for="difficulty">Difficulty:</label>
        <select id="difficulty">
            <option value="4">Easy(4x4)</option>
            <option value="6">Medium(6x6)</option>
            <option value="8">Hard(8x8)</option>
        </select>
        
        </div>
        
    <div class="stats-container">
        <div class="stat">
            <div class="stats-value" id="moves">0</div>
            <div class="stat-label">Moves</div>
        </div>
        
        <div class="stat">
            <div class="stats-value" id="matches">0</div>
            <div class="stat-label">Matches</div>
        </div>
        
        <div class="stat">
            <div class="stats-value" id="timer">0</div>
            <div class="stat-label">Seconds</div>
        </div>
    </div>
        
        <div class="game-container">
            <div class="game-board" id="gameboard"></div>
        </div>
        
        <div class="controls">
            <button id="restartBtn">New Game</button>
            <button id ="hintBtn">Hint(3 left)</button>
        </div>
        
        <script>
            document.addElementListener('DOMContentLoaded'),()=>{
                const gameBoard=document.getElementById('gameboard');
                const movesDisplay=document.getElementById('moves');
                const matchDisplay=document.getElementById('matches');
                const timerDisplay=document.getElementById('timer');
                const resartBtn=document.getElementById('restartBtn');
                const hintBtn=document.getElementById('hintBtn');
                const difficultSelect=document.getElementById('difficulty-selector');
                
                let cards=[];
                let flippedCard=[];
                let moves=0;
                let matchPairs=0;
                let totalPairs=8;
                let gridSize=4;
                let timer=0;
                let timerInterval=null;
                let hintRemaining=3;
                let gameActive=false;
                
                const symbols=[
                    '♫','♠','♥','☻',
                    '☼','▲','◙','▓',
                    '♣','♦','۩','۝',
                    '۞','֎','ﷴ','ﷺ'
                ];
                //Intialse the game
                function initGame(){
                    clearInterval(timerInterval);
                    gameboard.innerHTML='';
                    
                    //Get selected difficulty
                    gridSize=parseInt(difficultSelect.value);
                    totalPairs=(gridSize *gridSize)/2;
                    
                    //Rset game state
                    moves=0;
                    matchPairs=0;
                    timer=0;
                    hintRemaining=3;
                    flippedCard=[];
                    gameActive=true;
                    
                    //Update display
                    movesDisplay.textContent=moves;
                    matchDisplay.textContent= `${ matchPairs}/${totalPairs}`;
                    timerDisplay.textContent=timer;
                    hintBtn.textContent=`Hint (${ hintRemaining}left)`;
                    
                    //start timer
                    timerInterval=setInterval(()=>{
                        timer++;
                        timerDisplay.textContent=timer;
                    },1000);
                    
                    //Create card pairs based on grid size
                    const usedSymbols=symbols.slice(0,totalPairs);
                    const cardValues=[...usedSymbols,...usedSymbols];
                    
                    //Shuffle the cards
                    const shuffledCards=shuffledArray(cardValues);
                    
                    //Set up the game
                    gameboard.style.gridTemplelateColums=`repeat(${gridSize},var(--card-width))`;
                    
                    //Create card element
                     shuffledCards.forEach((value,index)=>{
                         const card=document.createElement('div');
                         card.className='card';
                         card.dataset.value=value;
                         card.dataset.index=index;
                         
                         const cardFront=document.createElement('div');
                         cardFront.className='card-face card-front';
                         cardFront.textContent='?';
                         
                         const cardBack=document.createElemey('div');
                         cardBack.className='card-face card-back';
                         cardBack.textContent='?';
                         
                         card.appendChild(cardFront);
                         card.appendChild(cardBack);
                         card.addEventListener('click',()=>flipCard(card));
                         
                         gameboard.appendChild(card);
                     });
                     cards=document.querySelectorAll('.card');
                }
                //Shuffle array iusing modern finsher-Yates algorithm
                 function shuffleArray(array){
                     const newArray=[...array];
                     for(let i=newArray.length-1;i<0;i--){
                         const j=math.fllor(math.random() *(i+1));
                         [newArray[i], newArray[j]=newArray[i]];
                     }
                     return newArray;
                 }
                 //Flip a card
                 function flipCard(card){
                     if(!gameActive||flippedCards.length===2||card.classList.contains('flipped')||card.classList.contains('matched')){
                        return; 
                     }
                     
                     //flip the card
                     card.classList.add('flipped');
                     flippedCards.push(card);
                     
                     //check for match when two cards are flipped
                     if(flippedCards.length===2){
                         moves++;
                         movesDisplay.textContent=moves;
                         
                         if(flippedCards[0].dataset.value===flippedCards[1].dataset.value){
                             //Match found
                             flippedCards.forEach(card=>{
                                 card.classList.dd('matched');
                             });
                             flippedCards=[];
                             matchPairs++;
                             matchDisplay.textContent=`${ matchPairs}/${totalPairs}`;
                             
                             playSound('match');
                             
                             //Check for win
                             if(matchPairs===totalPairs){
                                 endGame(true);
                             }else{
                                 //No match-flip back after display
                                 setTimeout(()=>{
                                   flippedCards.forEach(card=>{
                                       card.classList.remove('flipped');
                                   });
                                   flippedCards=[];
                                   playsound('flip');
                                 },1000);
                             }
                         }else{
                             //Play flip sound for single card
                             palySound('flip');
                         }
                     }
                     
                     //Give hint (temperare show two unmatched cards)
                     function giveHint(){
                         if(hintRemaining <=0 || !gameActive ||flippedCards.length>0) return;
                         
                         //Find all unmatched ,unlipped cards
                         const unFlipppedCards = Array.from(careds).filter(card=> !card.classList.contins('matched') &&
                                 !card.classList.contains('flipped')
                        );
                       if(unFlipppedCards.length< 2) return;
                       
                       //Find a matching pair to reveal
                       const cardValue=unFlipppedCards.map(card=>card.dataset.value);
                       const valueCounts={};
                       let hintPair=1;
                       
                       for (let i=0;i<cardValue.lenth;i++){
                           const value=cardValue[i];
                           if(valueCounts[value]){
                             hintPair=[unFlipppedCards[valueCounts[value].index],unFlipppedCards[i]
                             ];
                             break;
                           }
                           valueCounts[value]={value, index : i};
                       }
                       //If no pair found, just show two random cards
                       if(hintPair.length===0){
                          hintPair=[unFlipppedCards[0],unFlipppedCards[1]];
                       }
                       //Temperalt show  the hint cards
                       hintPair.forEach(card=>{card.classList.add('flipped');
                       });
                       
                       setTimeout(()=>{
                           hintPair.forEach(card=>{
                               card.classList.remove('flipped');
                           });
                       },1500);
                       
                       //Update hints remaining
                       hintRemaining--;
                       hintBtn.textContent=`Hint(${hintRemaining} left)`;
                       
                       //Disable button if no hints left
                       if(hintRemaining<=0){
                           hintBtn.disabled=true;
                       }
                       playSound('hint');
                     }
                     
                     //End the game (win or restart
                     function endGame(win=false){
                         gameActive=false;
                         clearInterval(timerInterval);
                         
                         if(win){
                             //Create ceebration element
                             const celebration=document.createElement('div');
                             celebration.className='celebration';
                             celebration.textContent='Victory';
                             document.body.appendChild(celebration);
                             
                             //Play vicory sound 
                             playSound('win');
                             
                             //Remove celebtration after animation
                             setTimer(()=>{
                                 celebration.remove();
                             },2000);
                         }
                     }
                 }
                 function playSound(type){
                     const sounds={
                         flip:{freq:400,durition:0.1},
                         match:{freq:800,durition:0.3},
                         win:{freq:1000,durition:1.1},
                         hint:{freq:600,durition:0.2}
                     };
                     
                     if(sound[type]){
                         const audiCtx=new(window.AudioConnect || window.webkitAudioContext)();
                         const oscillator=audioCtx.createOscillsstor();
                         const gainNode=audioCtx.createGain();
                         
                         oscillator.type='sine';
                         oscillatofrequency,value=sounds[type].freq;
                         gainNode.gain.value=0.1;
                         
                         oscillator.connect(gainNode);
                         gainNode.connect(audioCtx.destination);
                         
                         oscillator.start();
                         gainNode.gain.exponentialRampToValueAtTime(
                                 0.0001,audioCtx.currentTime +sounds[type].durition);
                         oscillator.stop(audioCtx.currentTime +sound[type].durition);
                     }
                 }
                 //Event listeners
                 restartBtn.addEventListener('click',initGame);
                 hintBtn.addEventListener('click',giveHint);
                 difficultSelect.addEvenetListener('change',initGame);
                 
                 initGame();
            };
        </script>    
  </body>
</html>
